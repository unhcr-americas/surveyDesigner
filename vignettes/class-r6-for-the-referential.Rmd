---
title: "Class R6 for the referential"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{class-r6-for-the-referential}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(surveyDesigner)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_r6_referential.Rmd: do not edit by hand -->

# r6_referential

A referential is initially created through the import from an excel file. 

For each Operational purpose (Household Survey, Flow Monitoring, Key Informants...), there's a distinct referential.

This file at first defines the mapping between:  

  * Indicators;
  * Target population;
  * Disaggregation variables;
  * Survey Variables;
  * Survey modalities, aka the choices.

The filtering of the referential should take in account the order/sequence of questions and modules. 

A specific method is implemented to separate our file with begin and end group


```{r examples-r6_referential}
ref <- Referential$new(
  path = system.file("SurveyDesigner_Referential.xlsx", package = "surveyDesigner") 
)

head(ref$data$survey)

# Example by groups
ref$by_groups$group_intro
```

# Utils for referential manipulation

Utilities functions are created to ensure the full integrity of the referential


## Utilities in relation with xlsform

 * `names_of_sheet` The referential file in excel should includes all required worksheet. When loading the referential - it should comply with xlsform and  further referential-specific expected parameters - see - also https://github.com/XLSForm/pyxform
 
 * `contains_groups` the survey worksheet should include groups to bring together questions
 
 * `get_groups` utilities to pull groups from the survey worksheet
 
 * `get_choices_for_question` utilities to pull all choices from select_one and select_all functions
 

## Utilities in relation with indicators mapping

 
 * `has_variables_for_indicators` If an indicator is defined it should map with at least one variable from the survey worksheet
 
 * `indicator_linked_population` An indicator should map with at least one population
 
 * `population_linked_indicator` If a relation between one population and one indicator is recorded, the indicator should also be defined in the indicator frame
 
 * `indicator_linked_variable` If an indicator is defined to map with variables from the survey worksheet, then all those variables should actually be present in the survey frame
    
    
    

 
 

  
  

  


