<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>surveyDesigner • surveyDesigner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="surveyDesigner">
<meta property="og:description" content="surveyDesigner">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyDesigner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/surveyDesigner.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/class-r6-for-the-referential.html">Class R6 for the referential</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>surveyDesigner</h1>
            
      
      
      <div class="hidden name"><code>surveyDesigner.Rmd</code></div>

    </div>

    
    
<p><code>{surveyDesigner}</code> is essentially a shiny interface
developed as a package using the <a href="https://thinkr-open.github.io/golem/" class="external-link"><code>golem</code>
framework</a>. The main goal is the interface is to generate
contextualized questionnaires that follows predefined codebook using <a href="https://xlsform.org/en/" class="external-link">XlsForm standard</a>. Rather than
starting from scratch, users can then create questionnaire based on
curated questions and modules, allowing to generate standard indicators
in relation with agreed-upon pre-defined analysis framework(s).</p>
<div class="section level2">
<h2 id="problem-statement-why-a-survey-designer">Problem Statement: Why a Survey Designer?<a class="anchor" aria-label="anchor" href="#problem-statement-why-a-survey-designer"></a>
</h2>
<p>For most assessment, <a href="https://xlsform.org/en/" class="external-link">XlsForm</a>
based platform such as <a href="https://www.kobotoolbox.org/" class="external-link">Kobotoolbox</a>, <a href="https://opendatakit.org/" class="external-link">OpenDataKit</a> or <a href="https://company.ona.io/products/ona-data/features/" class="external-link">ONA</a> have
become the <em>de facto</em> standard. Thanks to those platform
constructing a questionnaire became extremely easy, but at the same time
it also become very eay to replicate questionnaire design flaw and very
challenging to enforce good practices (like the one described <a href="https://unhcr.github.io/Integrated-framework-household-survey/Configure-forms.html" class="external-link">here</a>).
Although questionnaire design mostly relies on common sense (Ask
interesting questions first, be concise, limit answer options, use
simple phrasing, ask about recent events and avoid too many open-ended
questions), building a good and reliable questionnaire requires a lot of
testing.</p>
<p>Rather than starting from scratch, it is better to leverage the
existing knowledge.</p>
<div class="section level3">
<h3 id="implement-standards">Implement Standards<a class="anchor" aria-label="anchor" href="#implement-standards"></a>
</h3>
<p>Enforce Standards…</p>
<ul>
<li>List of questions allowing to generate Basic &amp; Standard
Indicators<br>
</li>
<li>Flow of questions Variable sequences<br>
</li>
<li>List of indicators</li>
<li>Variable names &amp; Variable modalities names standard naming
conventions</li>
<li>Skip Logic</li>
<li>Constraint</li>
</ul>
<p>….while allowing for contextualization</p>
<ul>
<li>Supplementary questions and related optional indicators</li>
<li>Adjusted Labels</li>
<li>Country Specific instructions</li>
</ul>
</div>
<div class="section level3">
<h3 id="estimate-questionnaire-lenght">Estimate questionnaire lenght<a class="anchor" aria-label="anchor" href="#estimate-questionnaire-lenght"></a>
</h3>
<p>An important dimension in terms of data collection quality is to
ensure that the final questionnaire is not long to avoid fatiguing
respondents and to maintain their peak concentration without being
distracted by other things, i.e <strong>not more than 20-40
minutes</strong> (depending on skip logic). Optimal survey lengths are
usually significantly linked the way the questions are designed and to
the fact that respondents have interest in answering the survey and can
trust that their data will be treated in an anonymous way. Optimal
survey duration also depends on data collection mode (self-administered
or interview) and both abandon rates and interview attention focus
increase significantly with the number of questions includes in the
questionnaire.</p>
<p>For both, <a href="https://www.unhcr.org/en-us/60804b214.pdf#page=7" class="external-link">Education</a>
and <a href="https://www.unhcr.org/5ea81b954.pdf" class="external-link">Employment</a>,
indicators were already classified as <strong>basic, standard &amp;
optional</strong>. This can help defining a process where:</p>
<ul>
<li>Each questionnaire should systematically include all core questions
to calculate basic indicators</li>
<li>Depending on the quarterly data collection round, a different set of
standard indicators, corresponding to one or more questions modules, can
be prioritized</li>
<li>After calculating the remaining potential interview time, once core
&amp; standard indicators, optional indicators can be added though
supplementary and contextualisable questions</li>
</ul>
</div>
<div class="section level3">
<h3 id="generate-machine-readable-codebook">Generate machine-readable codebook<a class="anchor" aria-label="anchor" href="#generate-machine-readable-codebook"></a>
</h3>
<p>A survey designer is not expected to be only a form-builder, but
rather a codebook generator.</p>
<blockquote>
<p>A codebook describes the contents, structure, and layout of a data
collection. A well-documented codebook “contains information intended to
be complete and self-explanatory for each variable in a data file</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="track-calculation-for-calculatedderived-variables">Track calculation for calculated/derived variables<a class="anchor" aria-label="anchor" href="#track-calculation-for-calculatedderived-variables"></a>
</h3>
<p>In many cases, standard indicators are not directly generated though
a question but rather through a combination of questions, grouped
together with a specific formula. This is the case for instance for the
<a href="https://www.ilo.org/ilostat-files/LFS/CAPI_JobType_V3_Full.zip" class="external-link">ILO
Employement indicators</a>. as the survey designer shall enforce a
standardized codebook, it shall be also possible to enforce the same
standardized calculation.</p>
</div>
</div>
<div class="section level2">
<h2 id="technical-requirements-for-the-interface">Technical Requirements for the interface<a class="anchor" aria-label="anchor" href="#technical-requirements-for-the-interface"></a>
</h2>
<div class="section level3">
<h3 id="document-data-collection-per-anticipation-and-early-on">Document data collection per anticipation and early-on<a class="anchor" aria-label="anchor" href="#document-data-collection-per-anticipation-and-early-on"></a>
</h3>
<div class="section level4">
<h4 id="configure-per-default-the-correct-p-code-for-admin-unit-in-the-country">1. Configure per default the correct P-code for admin unit in the
country<a class="anchor" aria-label="anchor" href="#configure-per-default-the-correct-p-code-for-admin-unit-in-the-country"></a>
</h4>
<p>Using <a href="https://www.humanitarianresponse.info/en/help/cod-pcodes-use-hrinfo" class="external-link">P-code</a>
is critical to ensure that the recording of location is done in a smooth
way. When designing a form, it is essential that the usage of
standardized p-code is enforced for each country.</p>
</div>
<div class="section level4">
<h4 id="enforce-the-basic-indicators-that-the-dataset-should-generate">2. Enforce the basic indicators that the dataset should
generate:<a class="anchor" aria-label="anchor" href="#enforce-the-basic-indicators-that-the-dataset-should-generate"></a>
</h4>
<p>There a multiple analysis framework that</p>
<p>1- <a href="https://www.jips.org/uploads/2019/09/EGRIS-IRRS-IntRecommendationsRefugeeStatistics-EN.pdf#page=94" class="external-link">International
Recomendations on Refugee Statistics (EGRIS)</a>, most indicators there
refers to SDG indicators, for which guidance in terms of specific survey
questions are documented by <a href="https://unstats.un.org/sdgs/metadata/" class="external-link">UN Statistics</a>), UNHCR
has highlighted the list of <a href="https://www.unhcr.org/5fd237b84/data-disaggregation-sdg-indicators-forced-displacement" class="external-link">Data
disaggregation of SDG indicators by forced displacement</a>;</p>
<p><img src="../inst/sdg.jpg"></p>
<p>2- <a href="https://www.globalprotectioncluster.org/wp-content/uploads/Introduction-to-the-PAF.pdf" class="external-link">Protection
Analysis Framework (PAF)</a>;</p>
<p>3- <a href="https://assessments.hpc.tools/sites/default/files/km/03.HPC_2021-JIAF_Guide.pdf" class="external-link">Severity
analysis (JIAF)</a>;</p>
<p>4- <a href="https://docs.wfp.org/api/documents/WFP-0000113729/download/" class="external-link">Vulnerability
Analysis</a>;</p>
<p>5- <a href="https://intranet.unhcr.org/en/protection-programme/compass/COMPASS_Guidance/Guidance_6.html" class="external-link">Situation
Analysis (SitAn)</a>.</p>
</div>
<div class="section level4">
<h4 id="define-which-modules-shall-be-used-which-indicators-is-expected-to-be-calculated">3. Define which Modules shall be used &amp; which Indicators is
expected to be calculated<a class="anchor" aria-label="anchor" href="#define-which-modules-shall-be-used-which-indicators-is-expected-to-be-calculated"></a>
</h4>
</div>
<div class="section level4">
<h4 id="define-which-data-collection-mode-will-be-used">4. Define which Data Collection Mode will be used<a class="anchor" aria-label="anchor" href="#define-which-data-collection-mode-will-be-used"></a>
</h4>
<ul>
<li><p>Interview (Face-to-face or remote),</p></li>
<li><p>Self-administered (online form)</p></li>
<li><p>Case management (embedded during regular interaction at reception
centers or community centers)</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="pre-record-survey-metadata">5. Pre-record Survey Metadata<a class="anchor" aria-label="anchor" href="#pre-record-survey-metadata"></a>
</h4>
<p>Data Documentation is now covered by the <a href="https://ddialliance.org/" class="external-link">DDI Standard</a> whcih describes data
produced by surveys and other observational methods in the social,
behavioral, economic, and health sciences.</p>
<p>DDI is a free standard that can document and manage different stages
in the research data life cycle, such as conceptualization, collection,
processing, distribution, discovery, and archiving. Documenting data
with DDI facilitates understanding, interpretation, and use – by people,
software systems, and computer networks. DDI allows to both Document,
Discover, and Interoperate!</p>
<p>Describe of the study motivating the data collection: - who is
expected to collect the data (direct implementation, partners through a
project partnership agreement, partners through a memorandum of
understanding, contracted company…) - Sampling information: what is the
population to be studied, how the sample will be drawn…</p>
</div>
</div>
<div class="section level3">
<h3 id="create-points-of-control-on-supplementary-questions">Create Points of control on supplementary questions<a class="anchor" aria-label="anchor" href="#create-points-of-control-on-supplementary-questions"></a>
</h3>
<ul>
<li><p>Check variable names – has meaning, starts with a letter, can use
lowerUpper cases – meaningful, not random string.</p></li>
<li><p>Keep existing questions as they are, name new ones.</p></li>
<li><p>Check list choice names - meaningful, not random string. Use of
lists already written instead of creating new ones (ex: YesNo,
YesNoDnt)</p></li>
<li><p>Check required vs. optional – optional is discouraged unless for
open text.</p></li>
<li><p>Check relevance – make sure its correct coding for question type
(select one vs. multiple).</p></li>
<li><p>Translations at least in Spanish &amp; English</p></li>
<li><p>Recommended use of constraints for: integers, dates, multiple
choice with ‘none of the above’ ‘prefer not to say’ options.</p></li>
<li><p>Make good use of constraint messages: “Cannot select ‘None of the
above’ with other options”.</p></li>
<li><p>Make use of ‘Hint’ space when appropriate. (i.e. read all
statement above – or – listen to the answer and select appropriate match
within the below list)</p></li>
<li><p>Clearly defined question type, based on what evidence you want to
gather.</p></li>
<li><p>Step away from a ‘case-management’ mindset and into a data
mindset – the question is not used to identify a case, rather to provide
evidence that supports/refutes a statement.</p></li>
<li><p>Check/define relevance: under what conditions the question
appears. Avoiding ‘not applicable’ as an answer option.</p></li>
<li><p>Minimize/consolidate answer options – a long list of too-specific
answers will yield very small %s. Consolidate answers around bigger
“themes” that would yield medium-high %s.</p></li>
<li><p>Consider how the person would react to the question – is it too
invasive? How likely are they to answer truthfully? Is the terminology
difficult to understand?</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="export-questionaire-validate-revised-questionnaire">Export questionaire &amp; validate revised questionnaire<a class="anchor" aria-label="anchor" href="#export-questionaire-validate-revised-questionnaire"></a>
</h3>
<p>Once initially design the questionnaire needs to be outputed as:</p>
<ul>
<li>Valid XlsForm - that go through validation <a href="https://opendatakit.org/xlsform/" class="external-link">here for instance</a>
</li>
<li>In order to avoid having in parallel a word version and an encoded
version of the questionnaire, a Pretty printed version of the original
contextualized XlsForm questionnaire should be generated in either doc,
html or PDF, like the one generated by <a href="https://github.com/pmaengineering/ppp" class="external-link">The Pretty PDF
Printer–Converting XlsForm Excel files into “paper
questionnaires”</a>
</li>
</ul>
<p><img src="../inst/demo.png"></p>
<ul>
<li>and shared automatically to the xlsform master list curator for peer
reviewer and potential improvement of the orginal masterlist</li>
</ul>
<p>As part of the questionnaire design workflow, it is expected that the
survey expert will circulate the initial draft questionnaire for review
and comments. The survey export should therefore be able to upload a
revised xlsform to the interface and get a validation report (comparing
the contextualised version with the master for confirmation that the
contextualisation is done in the scope of the acceptable standard)</p>
</div>
</div>
<div class="section level2">
<h2 id="limitations-of-existing-solutions">Limitations of existing solutions<a class="anchor" aria-label="anchor" href="#limitations-of-existing-solutions"></a>
</h2>
<div class="section level3">
<h3 id="kobotoolbox-question-library">Kobotoolbox Question Library<a class="anchor" aria-label="anchor" href="#kobotoolbox-question-library"></a>
</h3>
<p>Within kobotoolbox, Questions that have previously been added to a <a href="https://support.kobotoolbox.org/question_library.html" class="external-link">Question
Library</a> can be added to any other form by drag-and-dropping them
from the Question Library sidebar within the formbuilder.</p>
<p><img src="../inst/library.jpg"></p>
<p>This feature has the following constraints:</p>
<ul>
<li>Does not enforce the preservation of question sequence</li>
<li>Does not allow to also include potential labels for reporting</li>
<li>Does not output pretty-printed questionnaire</li>
<li>Does not allow for questionnaire post-validation</li>
</ul>
</div>
<div class="section level3">
<h3 id="wfp-survey-designer">WFP Survey Designer<a class="anchor" aria-label="anchor" href="#wfp-survey-designer"></a>
</h3>
<p><a href="https://dev.surveydesigner.vam.wfp.org" class="external-link">WFP Survey
Designer</a> seems to address the technical requirements and use case.
but</p>
<p><img src="../inst/home_page_screen.png"></p>
<p>This application though has the following constraints:</p>
<ul>
<li>the source are closed and it is not possible to adapt it quickly for
other needs</li>
<li>Does not allow to also include potential labels for reporting</li>
<li>Does not enforce the preservation of question sequence</li>
<li>Does not output pretty-printed questionnaire</li>
<li>Does not allow for questionnaire post-validation</li>
</ul>
</div>
<div class="section level3">
<h3 id="ilo-labour-force-survey-programme-builder">ILO Labour Force Survey Programme builder<a class="anchor" aria-label="anchor" href="#ilo-labour-force-survey-programme-builder"></a>
</h3>
<p><a href="https://ilostat.ilo.org/resources/lfs-resources/#programme_builder" class="external-link">ILO
Labour Force Survey Programme builder</a> is designed to also help to
the generation of contextualised questionnaire</p>
<p><img src="../inst/ilo.jpg"><br>
This application though is not compatible with xlsform.</p>
</div>
<div class="section level3">
<h3 id="mockup">Mockup<a class="anchor" aria-label="anchor" href="#mockup"></a>
</h3>
<p><img src="../reference/figures/proto.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="required-standard-for-the-master-xlsform">Required Standard for the master xlsform<a class="anchor" aria-label="anchor" href="#required-standard-for-the-master-xlsform"></a>
</h2>
<p>An initial example of a question bank is <a href="https://github.com/unhcr-americas/surveyDesigner/blob/main/inst/XlsForm_master.xlsx" class="external-link">here</a></p>
<p>The proposal is to follow a standard generally follows the <a href="https://xlsform.org/en/" class="external-link">XLSForm format</a> an compatible with the
one used by Kobotoolbox library, meaning a few additional columns
specifying filtering capacity:</p>
<ul>
<li><p>Question <strong>blocks</strong> : label has no limitations in
terms of characters, but it needs to be the exact same spelling to avoid
breaking the block up (’Household questions’ is different from
‘household questions’). Use a block title that makes it easy to identify
the contents later on. Any row in the template sheet that doesn’t have a
value in the block column will be imported as a separate
question.</p></li>
<li><p>Question <strong>tags</strong> for the question or block. Each
additional tag is created by adding a column <a href="tag:%5Byour" class="uri">tag:[your</a> tag name] for each tag, then writing ‘1’ in
each row that should use the tag. In the case of blocks, it’s enough to
write ‘1’ in any of the rows in the block regardless which one. It’s
enough to mark one of the questions in the block, though it doesn’t
matter if several questions are tagged.</p></li>
</ul>
<p>In addition the master file can include - Question
<strong>groups</strong> in blocks. Just ensure that the ‘begin group’
line has a unique ‘name’ ID (as in all XLSForms) and that the opening
(begin group) and closing (end group) are included in the block.</p>
<ul>
<li><p>skip logic and validation rules within blocks: useful when
importing entire blocks of questions into new form drafts without having
to rebuild these advanced settings.</p></li>
<li><p>multiple languages to question and response
<strong>labels</strong> with the usual XLSForm syntax (label::English
(en), label::Español (es), etc.)</p></li>
<li><p>multiple languages for labels to be used in
<strong>Report</strong> with <a href="https://unhcr.github.io/koboloadeR/docs/" class="external-link">KoboloadeR</a></p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Edouard Legoupil, Cervan Girard.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
